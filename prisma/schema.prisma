// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id         String   @id @default(uuid())
  name       String
  email      String   @unique
  password   String
  adminType  String
  imageUrl   String?
  created_at DateTime @default(now())
}

//enum values for Leads model
enum CurrentSOL {
  Cold
  NoResponse
  CallBack
  Connected
}

enum FinalStatus {
  Converted
  InProgress
}

model Leads {
  id                 String       @id @default(uuid())
  mobileNumber       String?      @unique
  dateOfVisit        String?
  name               String?
  villageCity        String?
  district           String?
  state              String?
  sourceOfLead       String?
  currentSOL         CurrentSOL?  @default(Cold)
  callerName         String?
  assignedTo         String?
  finalStatus        FinalStatus? @default(InProgress)
  whatsappUrl        String?
  noteForLead        String?
  isConvertToProject Boolean      @default(false)
  createdAt          DateTime     @default(now())
}

model Project {
  id                     String       @id @default(uuid())
  dateOfLead             String
  name                   String
  mobileNumber           String       @unique
  villageCity            String
  district               String
  state                  String
  dscsSpInds             String?
  pspdlSection           String?
  solarConnectionDemand  Float?
  proposedSolarLoad      Float?
  monthlyBill            String?
  monthlyUnitConsumption String?
  positiveNegative       String?
  successRate            String?
  visitStatus            String?
  finalStatus            FinalStatus?
  noteForLead            String?
  isQuotation            Boolean      @default(false)
  isConvertToProject     Boolean      @default(true)
  whatsappLink           String?
  createdAt              DateTime     @default(now())
}

enum SubSidy {
  Subsidy
  NoSubsidy
}

enum SolarType {
  Residential
  Commercial
  Industrial
}

model Quotation {
  id                 String     @id @default(uuid())
  mobileNumber       String     @unique
  name               String
  district           String
  villageCity        String?
  solarType          SolarType?
  pspclAccountNumber String?
  sanLoad            Float?
  monthlyBill        Float?
  monthlyConsumption Int?
  proposedSolarLoad  Float?
  subsidy            SubSidy?
  solarPanels        Int?
  inverter           Float?
  baseAmount         Float?
  gst                Float?
  isQuotation        Boolean    @default(true)
  sitevist           Boolean    @default(false)
  totalPrice         Float?
  createdAt          DateTime   @default(now())
}

model SiteVisit {
  id                 String   @id @default(uuid())
  mobileNumber       String   @unique
  name               String
  pspclAccountNumber String
  district           String
  villageCity        String
  subDivision        String?
  dateOfVisit        String?
  siteLocation       String?
  pic1               String?
  pic2               String?
  pic3               String?
  pic4               String?
  pic5               String?
  sitevist           Boolean  @default(true)
  paymentDone        Boolean  @default(false)
  createdAt          DateTime @default(now())
}

model Payment {
  id                    String   @id @default(uuid())
  subsidy               SubSidy
  name                  String
  villageCity           String
  mobileNumber          String   @unique
  district              String
  pspclAccountNumber    String
  subsidyAmount         Float?
  netAmount             Float?
  advancePayment        Float?
  advancePaymentDate    String?
  payment1              Float?
  payment1Date          String?
  payment2              Float?
  payment2Date          String?
  payment3              Float?
  payment3Date          String?
  email                 String?
  totalProjectCost      Float?
  totalAmountReceived   Float?
  subsidyAmountReceived Float?
  paymentDone           Boolean  @default(true)
  createdAt             DateTime @default(now())
}
